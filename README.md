<!-- PROJECT LOGO -->
<div align="center">
  <a href="https://github.com/osamhack2021/app_web_dronai_62bn">
    <img
      src="https://github.com/osamhack2021/app_web_dronai_62bn/blob/master/resources/logo-images/logo_only_impact.png"
      alt="Logo" width="256px" height="256px">
  </a>

  <h3 align="center">DRONAI</h3>

  <p align="center">
    드론 전투체계 시스템 관리 콘솔
    <br />
    <br />
    <a href="https://dronai.linearjun.com">Web Demo</a>
    .
    <a href="https://osamhack2021.github.io/app_web_dronai_62bn/">Download</a>
    ·
    <a href="https://dronai.notion.site/dronai/DRONAI-44534bc31aac4efaa2b24e3480d71581">Notion</a>
    ·
    <a href="https://dronai.gitbook.io/dronai/">Documents</a>
    ·
    <a href="https://docs.google.com/presentation/d/1gOtEuXTCLChtCmJZqL4Rpi08TlMlSRpf/edit?usp=sharing&ouid=118304770497693886763&rtpof=true&sd=true">Presentation</a>
    <br />
    <br />
    <a href="https://github.com/osamhack2021/app_web_dronai_62bn/graphs/contributors">
      <img src="https://img.shields.io/github/contributors/osamhack2021/app_web_dronai_62bn.svg?style=for-the-badge" />
    </a>
    <a href="https://github.com/osamhack2021/app_web_dronai_62bn/network/members">
      <img src="https://img.shields.io/github/forks/osamhack2021/app_web_dronai_62bn.svg?style=for-the-badge" />
    </a>
    <a href="https://github.com/osamhack2021/app_web_dronai_62bn/stargazers">
      <img src="https://img.shields.io/github/stars/osamhack2021/app_web_dronai_62bn.svg?style=for-the-badge" />
    </a>
    <a href="https://github.com/osamhack2021/app_web_dronai_62bn/issues">
      <img src="https://img.shields.io/github/issues/osamhack2021/app_web_dronai_62bn.svg?style=for-the-badge" />
    </a>
    <a href="https://github.com/osamhack2021/app_web_dronai_62bn/blob/master/license.md">
      <img src="https://img.shields.io/github/license/osamhack2021/app_web_dronai_62bn.svg?style=for-the-badge" />
    </a>
  </p>
</div>

<h2> :robot: DRONAI QUICK VIEW</h2>
<table align="center">
  <tr>
    <td>
      <a href="https://youtu.be/ji8bJF0EvwM" target="_blank">
        <img style="width:460px;"
          src="https://user-images.githubusercontent.com/36218321/138032867-20674515-90bc-4f58-b00a-6882bbe49fa5.png">
        <a />
    </td>
    <td>
      <a href="https://osamhack2021.github.io/app_web_dronai_62bn" target="_blank">
        <img style="width:460px;"
          src="https://user-images.githubusercontent.com/36218321/138033821-38e43702-bba5-4492-9aa7-adf58115fd9a.png">
      </a>
    </td>
  </tr>
  <tr>
    <td align="center">
      <a href="https://youtu.be/ji8bJF0EvwM"><b>소개 영상 보기</b></a>
    </td>
    <td align="center">
      <a href="https://osamhack2021.github.io/app_web_dronai_62bn"><b>시뮬레이션 다운로드</b></a>
    </td>
  </tr>
</table>

<table align="center">
  <tr>
    <td>
      <a href="https://dronai.linearjun.com" target="_blank">
        <img style="width:460px;"
          src="https://user-images.githubusercontent.com/36218321/138034337-7e0a0319-71eb-4e20-aa50-75cad2f66ece.png">
        <a />
    </td>
    <td>
      <a href="https://dronai.notion.site/FINAL-REPORT-afb579ec87384cbda0c0b6cc2534e861" target="_blank">
        <img style="width:460px;"
          src="https://user-images.githubusercontent.com/36218321/138035698-ed096fd1-1a88-484c-a76e-fd7d7ee706e2.png">
      </a>
    </td>
  </tr>
  <tr>
    <td align="center">
      <a href="https://dronai.linearjun.com"><b>웹 대시보드 접속하기</b></a>
    </td>
    <td align="center">
      <a href="https://dronai.notion.site/FINAL-REPORT-afb579ec87384cbda0c0b6cc2534e861"><b>프로젝트 보고서 보기</b></a>
    </td>
  </tr>
</table>

<table align="center">
  <tr>
    <td>
      <a href="https://dronai.gitbook.io/dronai/" target="_blank">
        <img style="width:460px;"
          src="https://user-images.githubusercontent.com/36218321/138036256-594e9b36-6fd7-4fae-b875-14bdc7d4dab5.png">
        <a />
    </td>
    <td>
      <a href="https://dronai.notion.site/dronai/DRONAI-44534bc31aac4efaa2b24e3480d71581" target="_blank">
        <img style="width:460px;"
          src="https://user-images.githubusercontent.com/36218321/138101447-1e259756-77e9-41f5-ad68-48a0c331d284.png">
      </a>
    </td>
  </tr>
  <tr>
    <td align="center">
      <a href="https://dronai.gitbook.io/dronai/"><b>프로젝트 Documentation 보기</b></a>
    </td>
    <td align="center">
      <a href="https://dronai.notion.site/dronai/DRONAI-44534bc31aac4efaa2b24e3480d71581"><b>협업 기록 및 전체 작업 보기</b></a>
    </td>
  </tr>
</table>



<h2> :books: 목차</h2>
<details open="open">
  <ol>
    <li><a href="#why"> 왜 사용해야 하는가? (Why?)</a></li>
    <li><a href="#about"> 프로젝트 소개 (About)</a></li>
    <li><a href="#features"> 기능 설명 (Features)</a></li>
    <li><a href="#techniques"> 기술 스택 (Techniques)</a></li>
      <ul>
        <li><a href="#client"> Simulation (Client)</a></li>
        <li><a href="#front_end"> Front-end (Dashboard)</a></li>
        <li><a href="#back_end"> Back-end (Api & Socket)</a></li>
        <li><a href="#server"> Server (Linux)</a></li>
      </ul>
    <li><a href="#client_technique_explanation"> 클라이언트 기술 설명 (Client Technique Explanation)</a></li>
    <li><a href="#web_technique_explanation"> 웹 및 서버 기술 설명 (Web and Server Technique Explanation)</a></li>
    <li><a href="#used_algo"> 사용된 알고리즘 (Used Algorithm)</a></li>
    <li><a href="#prerequisites"> 컴퓨터 구성 / 필수 조건 안내 (Prequisites)</a></li>
    <li><a href="#installation"> 설치 안내 (Installation Process)</a></li>
    <li><a href="#team"> 팀 정보 (Team Information)</a></li>
    <li><a href="#license"> 저작권 및 사용권 정보 (Copyleft / End User License)</a></li>
  </ol>
</details>

<h2 id="why"> :grey_question: 왜 사용해야 하는가?</h2>
<blockquote>DRONAI는 현 체제에서 어떠한 변화를 줄 수 있는가? 그에대한 설명을 기술하였다.</blockquote>

<table align="center">
  <tr>
    <td>
      <img style="width:360px;" src="https://user-images.githubusercontent.com/36218321/138038851-d566cf68-1289-4902-9696-4388e73bd222.jpg">
    </td>
    <td width=560 style="word-break:break-all" >
      현재 군에서는 '드론 운용 정비병'과 '해당 간부'가 팀을 이뤄 하나의 드론을 정비하고 조작한다. 현재와 같이 소수의 드론만을 전투에 활용한다면 이러한 체제로 운용이 가능할 수 있다. 그러나 다가오는 미래의 워리어 플랫폼에서 계속 소수의 드론만을 고집할지는 의문이며 만약 그렇다 한들 이는 심각한 문제로 제기 될 것이다.</br></br>드론 군집비행의 사례를 조사해본 결과 이미 해외에서는 어느정도 연구를 했거나 결과가 나온 경우가 많다. 대표적으로 <a href="https://www.intel.co.kr/content/www/kr/ko/technology-innovation/aerial-technology-light-show.html"> 인텔의 빛의 드론 프로젝트</a>나 중국 드론쇼 등이 있다. 물론 지금은 사람의 눈을 즐겁게하는 정도이지만 이 기술은 군사력 증진에 얼마든지 응용될 수 있다고 본다. 기존에 드론 군집 비행 개발 노하우가 있던 나라와 노하우가 없던 나라가 동시에 군용 드론 군집 비행 기술 개발을 시작한다면 당연히 전자가 후자보다 유리할 것이다.
    </td>
  </tr>
</table>

<table align="center">
  <tr>
    <td width=560 style="word-break:break-all">
      드론으로 표적을 <a href="https://www.ytn.co.kr/_ln/0134_202108290842384491">암살에 성공한 사례</a>가 있는 지금, 드론의 가능성과 능력은 증명 되었다고 본다. 그렇기에 다수에 드론을 동시에 제어할 수 있는 시스템의 존재는 필수적이라 본다. 사람이 언제까지 드론을 1대 1로 조종할 수 는 없으며 조종해야 될 개체수가 많아질 수록 더더욱 그렇다. 또한, 드론 군집 비행을 개발하고 연구한 노하우가 있어야, 반대로 드론 군집 비행으로부터의 공격을 막아낼 수 있는 안목이 생길 수 있다고 확신한다.
    </td>
    <td>
      <img style="width:360px;" src="https://user-images.githubusercontent.com/36218321/138042213-61c81089-1779-4e5b-abfa-5c58371125ce.jpg">
    </td>
  </tr>
</table>

<table align="center">
  <tr>
    <td>
      <img style="width:360px;" src="https://user-images.githubusercontent.com/36218321/138043752-c3db3223-7cde-482a-be2c-3d303dfb8329.png">
    </td>
    <td width=560 style="word-break:break-all">
      위와 같은 이유를 토대로 'DRONAI' 프로젝트는 기획되었다. 기획단계에서 한계점이 없었던 것은 아니다. 군 내에서 드론 군집 비행 시스템을 개발해 보인다는 것은 기술적으로 어려운 것은 둘째치고 여건이나 환경적으로 사실상 불가능 했다. 때문에 한계점을 명확히 인지하되 현실 상황에 빗된 시뮬레이션을 개발하여 프로젝트를 진행해 나가기로 결정했다. 이번 프로젝트의 목적은 실사용 가능한 드론 군집비행 시스템을 개발하는 것이 아니다. 드론 군집 비행의 뼈대를 잡고 응용 가능성을 테스트 해보며 이를 발전시켜 나아갈 수 있는지를 보는 것이 첫째이며, 추후 실제 상황에 투입할 드론 군집비행 개발을 위한 하나의 길잡이가 되는 것이 둘째 목표이다.
    </td>
  </tr>
</table>

<table align="center">
  <tr>
    <td width=560 style="word-break:break-all">
      그래서 'DRONAI'가 성공적으로 길잡이가 되어 주었는가를 뭍는다면 답은 '그렇다' 이다. 'DRONAI'는 동적으로 3차원 공간에서 경로를 탐색할 수 있는 능력을 가졌으며, 테스트 결과 동시에 64대까지 <b>98.2%</b> (바람이나 드론끼리의 고속 충돌 등 물리적인 예외는 존재) 의 확률로 안전한 경로를 탐색해 준다. 따라서 앞으로의 드론 군집 비행을 개발하는데에 있어 충분히 활용가능하다고 생각하며 만약 그렇지 못하더라도 전반적인 시스템으로부터 프로토타입이나 아이디어는 얻을 수 있다고 본다.
    </td>
    <td>
      <img style="width:360px;" src="https://user-images.githubusercontent.com/36218321/138046453-bff79953-dee8-4476-9ac1-13da69c194ff.png">
    </td>
  </tr>
</table>


<h2 id="about"> :exclamation: 프로젝트 소개</h2>
<blockquote>드론 전투체계를 통합적으로 관리하는 플랫폼이다.</blockquote>
<img src="https://media.wired.com/photos/59327007a312645844994da4/master/w_1600,c_limit/shadows2.gif" height="100%" width="100%"></img>

<details open="open">
  <ul>
    <li>클라이언트</li>
      <ul>
        <li><a href="#client_64formation_build">64기급 편대 빌딩<a/></li>
        <li><a href="#client_64formation_positioning">64기급 편대 형태 구성<a/></li>
        <li><a href="#client_64formation_flight">64기급 원형 편대 비행<a/></li>
          <li><a href="#client_64formation_recall">64기급 편대 복귀<a/></li>
        <li><a href="#client_init">클라이언트 로딩 화면<a/></li>
        <li><a href="#client_ui_proto">클라이언트 UI 작업 모습<a/></li>
        <li><a href="#client_ui_esc">클라이언트 UI [ESC 반응 / Interaction]<a/></li>
      </ul>
    <li>웹 대시보드</li>
      <ul>
        <li><a href="#register_login">회원가입 및 로그인<a/></li>
    </ul>
  </ul>
</details>

<img src="https://user-images.githubusercontent.com/73097560/115834477-dbab4500-a447-11eb-908a-139a6edaec5c.gif"></a>

<h3 id="client_64formation_build">64기급 편대 빌딩</h3>
<blockquote>'DRONAI SIMULATION'이 64기급 편대를 구축하기 위해 드론 64기를 동시에 부팅하는 상황이다.</blockquote>
<img src="https://user-images.githubusercontent.com/36218321/137712413-35658a9d-8253-4d76-a4a9-c049492018ac.gif"></img>

<h3 id="client_64formation_positioning">64기급 편대 형태 구성</h3>
<blockquote>'DRONAI SIMULATION'이 64기급 편대를 구축하기 위해 드론 64기의 비행 형태를 구성하는 장면 중 일부이다</blockquote>
<img src="https://user-images.githubusercontent.com/36218321/137714749-aa2b5bc9-26b5-4dc0-9490-d851809b6b9f.gif"></img>

<h3 id="client_64formation_flight">64기급 원형 편대 비행</h3>
<blockquote>'DRONAI SIMULATION'이 64기의 드론을 동시에 비행시키는 모습이다.</blockquote>
<img src="https://user-images.githubusercontent.com/36218321/137715451-50cbbed6-568d-48f5-8337-aff0296a600e.gif"></img>

<h3 id="client_64formation_recall">64기급 편대 복귀</h3>
<blockquote>'DRONAI SIMULATION'이 64기의 드론을 동시에 제자리로 복귀 시키는 모습 중 일부이다.</blockquote>
<img src="https://user-images.githubusercontent.com/36218321/137716383-4c909cc9-7159-4391-b509-c36168b0df87.gif"></img>


<img src="https://user-images.githubusercontent.com/73097560/115834477-dbab4500-a447-11eb-908a-139a6edaec5c.gif"></a>


<h3 id="client_init">클라이언트 로딩 화면</h3>
<blockquote>'DRONAI SIMULATION'을 구동할시 볼 수 있는 로딩화면이다.</blockquote>
<img src="https://user-images.githubusercontent.com/36218321/137708873-62e785f9-c480-4c55-bd6d-3212af6346b6.gif"></img>

<img src="https://user-images.githubusercontent.com/73097560/115834477-dbab4500-a447-11eb-908a-139a6edaec5c.gif"></a>

<h3 id="client_ui_proto">클라이언트 UI</h3>
<blockquote>작업 중인 클라이언트 UI 2차 프로토타입 초안</blockquote>
<img src="https://user-images.githubusercontent.com/36218321/136693588-115e3798-1b5e-4690-8711-85e736728e16.png">

<h3 id="client_ui_esc">클라이언트 UI [ESC 반응 / Interaction]</h3>
<blockquote>작업 중인 클라이언트 UI 2차 프로토타입 초안</blockquote>
<img src="https://user-images.githubusercontent.com/36218321/137709748-f0e681fe-288e-40c4-8c94-c17834817e5a.gif"></img>


<!--라인 효과-->
<img src="https://user-images.githubusercontent.com/73097560/115834477-dbab4500-a447-11eb-908a-139a6edaec5c.gif"></a>


<h3 id="register_login">회원가입 및 로그인</h3>
<blockquote>아래 사진은 'DRONAI' 대시보드에서 지원하는 회원가입 시스템이다. JWT 토큰을 이용한 세션 인증 방식으로 작동한다.</blockquote>
<img src="https://user-images.githubusercontent.com/36218321/137323586-d659536d-c1b9-417c-b542-8c6a7fb0162d.gif"></img>
<blockquote>아래 사진은 'DRONAI' 대시보드에서 지원하는 로그인 시스템이다. 로그인 역시 회원가입과 비슷하게 JWT 토큰을 이용한 세션 인증 방식으로 작동한다.</blockquote>
<img src="https://user-images.githubusercontent.com/36218321/137323452-e29a1641-f478-4679-baa0-d4b1352eba6b.gif"></img>


<!--라인 효과-->
<img src="https://user-images.githubusercontent.com/73097560/115834477-dbab4500-a447-11eb-908a-139a6edaec5c.gif"></a>


<h3 id="dashboard">대쉬보드 / DASHBOARD </h3>
<blockquote>기본 페이지입니다. 드론 개수, 이벤트 수, 마지막 이벤트 발생 시각, 마지막 이벤트 발생 장소 등의 원하는 정보를 실시간으로 반영하여 나타나게 만들 수 있습니다. </blockquote>
<img src="https://user-images.githubusercontent.com/36218321/137323802-263094f6-170c-4533-9d57-c01515691cc8.PNG"></img>


<!--라인 효과-->
<img src="https://user-images.githubusercontent.com/73097560/115834477-dbab4500-a447-11eb-908a-139a6edaec5c.gif"></a>


<h3 id="eventlist">이벤트 리스트 / EVENT LIST </h3>
<blockquote>이벤트 리스트입니다. 리액트 특성 상 컴포넌트의 상태가 업데이트 될 때 렌더링을 다시 해줍니다. 따라서 서버에 새로운 이벤트를 입력하면 즉시 반영되어 웹 페이지 내 이벤트 리스트가 수정됩니다.</blockquote>
<img src="https://user-images.githubusercontent.com/36218321/138047954-19bba013-00d1-43cd-8a7b-d59130128f7c.PNG"></img>

<h2 id="features"> :mag: 기능 설명</h2>
<blockquote>DRONAI에서 제공하는 기능에 대해 기술하는 영역</blockquote>

<details open="open">
  <ul>
    <li>클라이언트</li>
      <ul>
        <li><a href="#editor">에디터<a/></li>
        <li><a href="#runtime">런타임<a/></li>
        <li><a href="#drone_auto_locate">드론 자동배치 기능 (EDITOR)</a></li>
        <li><a href="#drone_auto_avoid">드론 자동회피 기능 (RUNTIME)</a></li>
      </ul>
    <li>웹 대시보드</li>
      <ul>
        <li><a href="#login">로그인 기능<a/></li>
        <li><a href="#dashboard">대시보드<a/></li>
        <li><a href="#eventlist">이벤트 리스트<a/></li>
      </ul>
    <li><a href="#dronai-uml">시스템 UML</a></li>
  </ul>
</details>

<hr>

<h3 id="editor">에디터 / EDITOR</h3>
<blockquote>에디터에서만 동작하는 기능</blockquote>
<img src="https://user-images.githubusercontent.com/36218321/136125123-456be0a1-2ec2-4318-bdbd-280101349366.PNG"></img>
<p>DRONAI는 컴파일된 프로그램뿐만 아니라 개발단계에서 필요한 에디터 화면에서도 여러 가지 기능을 제공한다.</p>
<p>앞으로 에디터에서만 동작하는 기능들에 대해서는 <b>EDITOR</b>라는 약어를 붙이겠다.</p>

<img src="https://user-images.githubusercontent.com/73097560/115834477-dbab4500-a447-11eb-908a-139a6edaec5c.gif"></a>

<h3 id="runtime">런타임 / RUNTIME</h3>
<blockquote>런타임에서 동작하는 기능</blockquote>
<img src="https://user-images.githubusercontent.com/36218321/136126788-88a8390a-6601-414f-b694-a977e0409abf.gif"></img>
<p>컴파일 및 빌드 된 DRONAI 시뮬레이션이 실질적으로 사용자에게 제공하는 기능들이다.</p>
<p>앞으로 런타임에서 동작하는 기능들에 대해서는 <b>RUNTIME</b>이라는 약어를 붙이겠다.</p>

<img src="https://user-images.githubusercontent.com/73097560/115834477-dbab4500-a447-11eb-908a-139a6edaec5c.gif"></a>

<h3 id="drone_auto_locate">드론 자동배치 기능 (EDITOR)</h3>
<blockquote>원하는 사이즈와 높이, 생성 빈도에 맞추어 초기 드론 그룹을 자동으로 생성해 준다</blockquote>
<img src="https://user-images.githubusercontent.com/36218321/136124125-f10d4fd4-4b9d-434a-b224-375c17981f74.gif"></img>


<!--라인 효과-->
<img src="https://user-images.githubusercontent.com/73097560/115834477-dbab4500-a447-11eb-908a-139a6edaec5c.gif"></a>


<h3 id="drone_auto_avoid">드론 자동회피 기능 (RUNTIME)</h3>
<blockquote>드론에 부착된 센서 기능으로 근방 1m 이내에 장애물이 감지되면 그와 반대 방향 벡터로 이동함</blockquote>
<img width="100%" src="https://user-images.githubusercontent.com/36218321/138048470-0b33f597-c969-430f-a78f-338594b71f70.gif"></img>


<!--라인 효과-->
<img src="https://user-images.githubusercontent.com/73097560/115834477-dbab4500-a447-11eb-908a-139a6edaec5c.gif"></a>


<h3 id="dronai_uml">시스템 UML</h3>
<blockquote>DRONAI 시스템 UML 프로토타입 (간략화 버전)</blockquote>
<img width="100%" src="https://user-images.githubusercontent.com/36218321/138081308-3e559495-7ce7-484f-8a3d-b990da9d0b51.png"></img>


<h2 id="techniques"> :electric_plug: 기술 스택 (Techniques Used)</h2>
<h3 id="front_end">Front-end (Dashboard)</h2>

 -  Module: react.js, react-redux, react-router
 -  Theme: material-ui, react-berry

<h3 id="back_end">Back-end (Api & Socket)</h2>

 - Language: javascript, typescript, scss
 - Module: nodejs, express, socket, bcrypt, passport
 - Database: sqlite3

<h3 id="client">Simulation (Client)</h2>

 - Language: C#
 - Tools: [Unity3d](https://unity.com)
 - References: [Priority Queue - MIT](https://github.com/BlueRaja/High-Speed-Priority-Queue-for-C-Sharp), [A* PATH - MIT](https://github.com/supercontact/PathFindingEnhanced)

<h3 id="server">Server (Linux)</h2>

 - OS: Linux
 - Tools: [Docker](https://www.docker.com/), [Maria DB](https://mariadb.org/)
 - Technique: SSL, HSTS, Reverse Proxy, Proxied, Virtual Host


<h2 id="client_technique_explanation"> :floppy_disk: 클라이언트 기술 설명 (Client Technique Explanation)</h2>

<h3>A* Dynamic</h3>
<blockquote>실시간 동적으로 경로 탐색이 가능한 자제 개발 알고리즘</blockquote>
<img src="https://user-images.githubusercontent.com/36218321/138098339-1379ec34-f391-4cf2-a208-8df1dc63263a.png" height="100%" width="100%"/>
<p>이 알고리즘은 <a href="#astar">A* 3차원 알고리즘</a>과 Sebastian Lague의 A* 프로젝트[MIT]를 응용하여 탄생한 자체 개발 알고리즘이다. 이 알고리즘은 동적으로 움직이는 오브젝트들까지 경로 탐색 과정에 반영하여 피해갈 수 있도록 해준다. 핵심되는 내용은 일정 주기에 맵을 Rebake 하는 쓰레드가 도는 것이며 그 소스는 아래와 같다</p>

```c#
public void UpdateGrid()
{
    if(Time.time - previousUpdateGridTime < .4f)
    {
        // print("[A* Dynamic] Request denied : Grid 최신화 주기가 잦음!");
        return;
    }
    previousUpdateGridTime = Time.time;

    Vector3 worldBottomLeft = transform.position - Vector3.right * gridWorldSize.x / 2 - Vector3.up * gridWorldSize.y / 2 - Vector3.forward * gridWorldSize.z / 2;
    for (int x = 0; x < gridSizeX; x++)
    {
        for (int y = 0; y < gridSizeY; y++)
        {
            for (int z = 0; z < gridSizeZ; z++)
            {
                Vector3 worldPoint = worldBottomLeft + Vector3.right * (x * nodeDiameter + nodeRadius) + Vector3.up * (y * nodeDiameter + nodeRadius) + Vector3.forward * (z * nodeDiameter + nodeRadius);
                bool walkable = !(Physics.CheckSphere(worldPoint, nodeRadius, unwalkableMask));

                int movementPenalty = 0;


                Ray ray = new Ray(worldPoint + Vector3.up * 50, Vector3.down);
                RaycastHit hit;
                if (Physics.Raycast(ray, out hit, 100, walkableMask))
                {
                    walkableRegionsDictionary.TryGetValue(hit.collider.gameObject.layer, out movementPenalty);
                }

                if (!walkable)
                {
                    movementPenalty += obstacleProximityPenalty;
                }

                grid[x, y, z] = new AstarNode(walkable, worldPoint, x, y, z, movementPenalty);
            }
        }
    }
}
```

<!--라인 효과-->
<img src="https://user-images.githubusercontent.com/73097560/115834477-dbab4500-a447-11eb-908a-139a6edaec5c.gif"></a>

<h3>드론 작업 스케줄러</h3>
<blockquote>DRONAI에서 드론 TASK를 관리 시스템</blockquote>

```
Priority Code 가 낮을수록 더 높은 작업 우선순위를 갖게 된다.

EX) 이 상황의 경우 0번 작업 실행 후 이어서 12 -> 16 -> ... -> 256까지 실행하고 난 뒤 드론 작업이 모두 종료된다.
[Priority Code : 0] > [Priority Code : 12] > [Priority Code : 16] > ... > [Priority Code : 256]

만약 위의 작업 스케줄에서 Priority Code : 14를 갖는 작업이 추가 된다면 아래와 같이 작업 우선순위 구성이 바뀐다.
[Priority Code : 0] > [Priority Code : 12] > [Priority Code : 14] > [Priority Code : 16] > ... > [Priority Code : 256]

여기서 Priority Code : 0의 작업이 종료 된다면 단순하게 First Element가 Pop 되므로 결과는 아래와 같다.
[Priority Code : 12] > [Priority Code : 14] > [Priority Code : 16] > ... > [Priority Code : 256]
```
<p>DRONAI에서 존재하는 모든 드론은 Priority Queue를 기반으로한 TASK 시스템을 갖고 있다. 이는 CPU 작업 스케줄러와 비슷하다고 보면 된다. 위의 작업 스케줄러 시스템은 <a href="#priority_queue">Priority Queue 알고리즘 (Heap and some more)</a>으로 작성되었다.</p>



<h2 id="web_technique_explanation"> :earth_asia: 웹 및 서버 기술 설명 (Web and Server Technique Explanation)</h2>

<h3>REVERSE PROXY</h2>
<blockquote>리버스 프록시(reverse proxy)는 컴퓨터 네트워크에서 클라이언트를 대신해서 한 대 이상의 서버로부터 자원을 추출하는 프록시 서버의 일종이다. 그런 다음 이러한 자원들이 마치 웹 서버 자체에서 기원한 것처럼 해당 클라이언트로 반환된다.</blockquote>
<img src="https://user-images.githubusercontent.com/36218321/136226162-65b7fff8-1f40-4a69-afd2-c201fac5b46a.jpg" height="100%" width="100%"/>
<p>DRONAI DASHBOARD및 API 서버, 백엔드 서버에 적용된 기술입니다.</p>


<!--라인 효과-->
<img src="https://user-images.githubusercontent.com/73097560/115834477-dbab4500-a447-11eb-908a-139a6edaec5c.gif"></a>


<h3>HSTS</h2>
<blockquote>HTTP 엄격한 전송 보안 (HSTS)는 다운 그레이드 공격 및 쿠키 하이재킹으로부터 HTTPS 웹 사이트를 보호하도록 설계된 웹 보안 정책 메커니즘입니다. HSTS를 사용하도록 구성된 웹 서버는 웹 브라우저 (또는 기타 클라이언트 소프트웨어)에 HTTPS 연결 만 사용하도록 지시하고 HTTP 프로토콜 사용을 허용하지 않습니다.</blockquote>
<img src="https://user-images.githubusercontent.com/36218321/136226998-648fbe9a-40d0-4bbd-80ab-0272d777f738.png" height="100%" width="100%"/>
<p>DRONAI DASHBOARD에 엄격히 적용된 기술입니다.</p>


<h2 id="used_algo"> :pencil2: 사용된 알고리즘 (Used Algorithm)</h2>

<h3 id="astar">A* 3rd Dimension</h3>
<blockquote>DRONAI에서 드론의 경로를 찾을 때 핵심적으로 사용된 알고리즘이다</blockquote>
<img src="https://user-images.githubusercontent.com/36218321/138076333-8dbc935f-1544-4e6f-b7ad-3edc54e1e407.gif" height="100%" width="100%"/>
<p>기본적으로 A star 알고리즘은 2차원에서 동작한다. 하지만 이 프로젝트에서는 3차원급 탐색을 요구하기에 A* 알고리즘의 핵심적인 부분을 변경할 필요가 있었다.
  다행이 이번 프로젝트를 진행하면서 이 부분을 해결하는데에 성공했다. <b>62BN 팀에서 자체적으로 개발한</b> A* 응용 알고리즘이며 그 핵심소스는 아래와 같다</p>

```c#
public int GetDistance(AstarNode nodeA, AstarNode nodeB)
{
    int dx = (int)Math.Abs(nodeA.GridX - nodeB.GridX);
    int dy = (int)Math.Abs(nodeA.GridY - nodeB.GridY);
    int dz = (int)Math.Abs(nodeA.GridZ - nodeB.GridZ);

    // make (dx, dy, dz) to (dx > dy > dz)
    if (dx < dy) Swap(ref dx, ref dy);
    if (dx < dz) Swap(ref dx, ref dz);
    if (dy < dz) Swap(ref dy, ref dz);

    // sqrt(3) = 1.7xxx, sqrt(2) = 1.4xxx
    // dz, dy - dz, (dx - dz) - (dy - dz)
    return 17 * dz + 14 * (dy - dz) + 10 * (dx - dy);
}
```

</br><hr>

<h3 id="priority_queue">Priority Queue</h3>
<blockquote>DRONAI에서 드론 TASK를 관리할 때 핵심적으로 사용된 알고리즘</blockquote>
<img src="https://user-images.githubusercontent.com/36218321/138077855-3fb73196-24a9-4c08-8077-832b00cb50b0.gif" height="100%" width="100%"/>
<p>어떠한 자료구조 및 Queue 혹은 Generic에서 최대한 빠르게 최소값에 접근하기 위해 이 알고리즘을 채택하였다.</p>

</br><hr>

<h3>Theta star and Lazy Theta star</h3>
<blockquote>DRONAI에서 smooth pathing을 위해 사용된 알고리즘</blockquote>
<img src="https://user-images.githubusercontent.com/36218321/138078469-9d07dfe2-a275-4786-a011-34e9aa8d97b8.PNG" height="100%" width="100%"/>
<p>ASCANE이 작성한 논문에서 발취한 알고리즘이다. 딱딱하게 나온 드론 경로를 조금 더 부드럽게 처리할 때 유용하여 부분적으로 채택하였다. 아래는 위 알고리즘의 의사소통 코드이다.</p>


<table align="center">
  <tr>
    <td>Theta star</td>
    <td>Lazy theta star</td>
  </tr>
  <tr>
    <td>
      <img style="width:460px;" src="https://user-images.githubusercontent.com/36218321/138079388-bdeb86e6-e74d-4c63-a314-82b34da899e7.PNG">
    </td>
    <td>
      <img style="width:460px;" src="https://user-images.githubusercontent.com/36218321/138079412-3aabfb2a-64d4-46e9-bb57-df4eca1d87d0.PNG">
    </td>
  </tr>
</table>


<h2 id="prerequisites"> :computer: 컴퓨터 구성 / 필수 조건 안내 (Prerequisites)</h2>

### Web
| <img src="https://user-images.githubusercontent.com/36218321/136121512-c8d2ba2a-4393-48c3-a796-3fc333ffbd6b.png" alt="Chrome" width="16px" height="16px" /> Chrome | <img src="https://user-images.githubusercontent.com/36218321/136121845-7c424ce5-fdc0-4bf6-988d-e69c633ddb8f.png" alt="IE" width="16px" height="16px" /> Internet Explorer | <img src="https://user-images.githubusercontent.com/36218321/136121593-d6f4a166-e330-46da-910e-f1f751b1f57a.png" alt="Edge" width="16px" height="16px" /> Edge | <img src="https://user-images.githubusercontent.com/1215767/34348394-a981f892-ea4d-11e7-9156-d128d58386b9.png" alt="Safari" width="16px" height="16px" /> Safari | <img src="https://user-images.githubusercontent.com/1215767/34348383-9e7ed492-ea4d-11e7-910c-03b39d52f496.png" alt="Firefox" width="16px" height="16px" /> Firefox |
| :---------: | :---------: | :---------: | :---------: | :---------: |
| Yes | No | Yes | Yes | Yes |

### Client (Recommendation)
| <img src="https://user-images.githubusercontent.com/36218321/136122713-f35caddf-423f-4e12-8ecd-0fd4eecfa3c0.png" alt="Processor" width="16px" height="16px" /> Processor | <img src="https://user-images.githubusercontent.com/36218321/136122476-96039289-656b-42fd-87e4-6fbcb0e54822.png" alt="Memory" width="16px" height="16px" /> Memory | <img src="https://user-images.githubusercontent.com/36218321/136122744-f3433980-53a2-43b0-a21f-8650a5d20563.png" alt="Graphics" width="16px" height="16px" /> Graphics | <img src="https://user-images.githubusercontent.com/36218321/136122837-6b83f566-e906-445d-a8ff-af895cecf406.png" alt="DirectX" width="16px" height="16px" /> DirectX | <img src="https://user-images.githubusercontent.com/36218321/136122898-eb30747d-82ec-464f-8acf-1f3986992e06.png" alt="Storage" width="16px" height="16px" /> Storage |
| :---------: | :---------: | :---------: | :---------: | :---------: |
| AMD Athlon X4 <br> Intel Core i5 4460 | 8 GB RAM | Nvidia GTX 950 <br> AMD R7 370 | Version 11 | 2 GB available space |



<h2 id="installation"> :information_source: 설치 안내 (Installation Process)</h2>

-  DRONAI SIMULATION 실행
```
========== 들어가기 전에 ==========
시뮬레이션은 기본전으로 dronai.linearjun.com 서버에 연결이 된다. 서버 주소는 RUNTIME내에서는 변경 불가능하다.


========== 실행 방법 ==========
1. 프로젝트를 클론 받거나 [다운로드 페이지](https://osamhack2021.github.io/app_web_dronai_62bn)에서 클라이언트를 다운 받는다.

2. Simulation.zip 의 압축을 푼다
   L 프로젝트를 클론 받았다면 result 폴더 안에서 Simulation.zip 을 찾을 수 있다.

3. DRONAI.exe를 실행시킨다


========== 조작 방법 ==========
- 마우스 우클릭을 통해 카메라를 회전 시킬 수 있다. 
- 마우스 휠을 통해 카메라 줌 인아웃이 가능하다
- ESC 키를 통해 UI에 접근이 가능하다. (ESC를 다시 누르면 꺼진다)
- TAB 키를 통해 Camera Focus Change UI에 접근할 수 있다. (TAB을 다시 누르면 꺼진다)
```
-  API 서버 실행
```bash
$ cd ./WEB\(BE\)/
$ yarn
$ yarn typeorm migration:run
$ yarn dev
```
-  DASHBOARD FRONTEND 실행
```bash
$ cd ./WEB\(FE\)/
$ yarn
$ yarn start
```

<h2 id="team"> :people_holding_hands: 팀 정보 (Team Information)</h2>

<table width="1200">
    <thead>
      <tr>
        <th width="100" align="center">Profile</th>
        <th width="100" align="center">Name</th>
        <th width="250" align="center">Role</th>
        <th width="200" align="center">E-mail</th>
        <th width="200" align="center">Github</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td width="100" align="center">
          <img src="https://user-images.githubusercontent.com/36218321/136213808-d47f7e73-98cf-43e1-accc-0927ed2495e2.jpg" width="100%" height="100%">
        </td>
        <td width="100" align="center">김준영</td>
        <td width="200" align="center">TEAM LEADER<br>Client Developer</td>
        <td width="200" align="center">admin@linearjun.com</td>
        <td width="200" align="center">
          <a href="https://github.com/linearjun" target="_blank">
            <img src="https://img.shields.io/badge/github-181717.svg?style=for-the-badge&logo=github&logoColor=white" alt="github" />
          </a>
        </td>
      </tr>
      <tr>
        <td width="100" align="center">
          <img src="https://user-images.githubusercontent.com/36218321/136693616-8772f2c6-6f71-4ea5-9a67-a233c5a720b7.jpg" width="100%" height="100%">
        </td>
        <td width="100" align="center">강건구</td>
        <td width="200" align="center">Algo & Logic<br>Client Developer</td>
        <td width="200" align="center">kdr06006@naver.com</td>
        <td width="200" align="center">
          <a href="https://github.com/kanggeongu" target="_blank">
            <img src="https://img.shields.io/badge/github-181717.svg?style=for-the-badge&logo=github&logoColor=white" alt="github" />
          </a>
        </td>
      </tr>
      <tr>
        <td width="100" align="center">
          <img src="https://user-images.githubusercontent.com/36218321/136688194-71fbd009-9ffa-4887-9078-74040007947a.jpg" width="100%" height="100%">
        </td>
        <td width="100" align="center">한충현</td>
        <td width="200" align="center">Front End<br>Web Developer</td>
        <td width="200" align="center">kd4aqqjr@naver.com</td>
        <td width="200" align="center">
          <a href="https://github.com/keyboardsejong" target="_blank">
            <img src="https://img.shields.io/badge/github-181717.svg?style=for-the-badge&logo=github&logoColor=white" alt="github" />
          </a>
        </td>
      </tr>
      <tr>
        <td width="100" align="center">
          <img src="https://user-images.githubusercontent.com/36218321/136219411-2e77fb33-31ae-44ea-a7ee-4fc2a5f97caf.png" width="100%" height="100%">
        </td>
        <td width="100" align="center">고건우</td>
        <td width="200" align="center">Product Manager<br>AI Researcher</td>
        <td width="200" align="center">coreax7@gmail.com</td>
        <td width="200" align="center">
          <a href="https://github.com/gwsl" target="_blank">
            <img src="https://img.shields.io/badge/github-181717.svg?style=for-the-badge&logo=github&logoColor=white" alt="github" />
          </a>
        </td>
      </tr>
    </tbody>
</table>

<h2 id="license"> :scroll: 저작권 및 사용권 정보 (Copyleft / End User License)</h2>

 * [MIT](https://github.com/osam2020-WEB/Sample-ProjectName-TeamName/blob/master/license.md)

This project is licensed under the terms of the MIT license.
